{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "AutoPromo Campaign Configuration",
  "description": "Schema for AutoPromo campaign.yaml configuration files",
  "type": "object",
  "required": [
    "name",
    "concept",
    "platforms"
  ],
  "properties": {
    "name": {
      "type": "string",
      "description": "Campaign name",
      "minLength": 1,
      "maxLength": 100
    },
    "concept": {
      "type": "string",
      "description": "Brief description of your app/service",
      "minLength": 10,
      "maxLength": 500
    },
    "url": {
      "type": "string",
      "format": "uri",
      "description": "App/service URL"
    },
    "platforms": {
      "type": "array",
      "description": "Social media platforms to post to",
      "minItems": 1,
      "items": {
        "type": "string",
        "enum": [
          "twitter",
          "bluesky",
          "mastodon",
          "linkedin",
          "dev_to"
        ]
      },
      "uniqueItems": true
    },
    "content": {
      "type": "object",
      "description": "Content configuration",
      "properties": {
        "style": {
          "type": "string",
          "enum": [
            "casual",
            "professional",
            "technical",
            "humorous"
          ],
          "description": "Content style"
        },
        "action": {
          "type": "string",
          "description": "Call to action",
          "maxLength": 50
        },
        "max_length": {
          "type": "integer",
          "minimum": 50,
          "maximum": 1000,
          "description": "Maximum content length"
        },
        "hashtags": {
          "type": "array",
          "description": "Hashtags to include",
          "maxItems": 10,
          "items": {
            "type": "string",
            "pattern": "^[a-zA-Z0-9_]+$"
          }
        },
        "platform_specific": {
          "type": "object",
          "description": "Platform-specific overrides",
          "patternProperties": {
            "^(twitter|bluesky|mastodon|linkedin|dev_to)$": {
              "type": "object",
              "properties": {
                "style": {
                  "type": "string",
                  "enum": [
                    "casual",
                    "professional",
                    "technical",
                    "humorous"
                  ]
                },
                "max_length": {
                  "type": "integer",
                  "minimum": 50,
                  "maximum": 1000
                },
                "hashtags": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                }
              }
            }
          }
        }
      }
    },
    "schedule": {
      "type": "object",
      "description": "Posting schedule",
      "properties": {
        "type": {
          "type": "string",
          "enum": [
            "immediate",
            "delayed",
            "recurring",
            "smart"
          ],
          "description": "Schedule type"
        },
        "time": {
          "type": "string",
          "description": "Specific time (ISO format or natural language)",
          "examples": [
            "2025-06-14T10:00:00Z",
            "tomorrow 10am",
            "next monday"
          ]
        },
        "frequency": {
          "type": "string",
          "enum": [
            "daily",
            "weekly",
            "monthly"
          ],
          "description": "Frequency for recurring posts"
        },
        "timezone": {
          "type": "string",
          "description": "Timezone for scheduling",
          "default": "UTC"
        }
      },
      "if": {
        "properties": {
          "type": {
            "const": "recurring"
          }
        }
      },
      "then": {
        "required": [
          "frequency"
        ]
      }
    },
    "image": {
      "type": "string",
      "description": "Image handling",
      "enum": [
        "generate",
        "auto",
        "none"
      ],
      "default": "auto"
    },
    "analytics": {
      "type": "boolean",
      "description": "Enable analytics tracking",
      "default": true
    },
    "experiments": {
      "type": "object",
      "description": "A/B testing configuration",
      "properties": {
        "ab_test": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean",
              "description": "Enable A/B testing"
            },
            "variants": {
              "type": "array",
              "description": "Test variants",
              "minItems": 2,
              "maxItems": 5,
              "items": {
                "type": "object",
                "properties": {
                  "action": {
                    "type": "string"
                  },
                  "style": {
                    "type": "string",
                    "enum": [
                      "casual",
                      "professional",
                      "technical",
                      "humorous"
                    ]
                  }
                }
              }
            },
            "metric": {
              "type": "string",
              "enum": [
                "engagement_rate",
                "clicks",
                "likes",
                "shares",
                "replies"
              ],
              "description": "Metric to optimize"
            },
            "duration": {
              "type": "string",
              "pattern": "^\\d+_days$",
              "description": "Test duration (e.g., '7_days')"
            }
          },
          "required": [
            "enabled"
          ],
          "if": {
            "properties": {
              "enabled": {
                "const": true
              }
            }
          },
          "then": {
            "required": [
              "variants",
              "metric",
              "duration"
            ]
          }
        }
      }
    },
    "ai": {
      "type": "object",
      "description": "AI configuration",
      "properties": {
        "provider": {
          "type": "string",
          "enum": [
            "[AI Service]",
            "openai"
          ],
          "description": "AI provider"
        },
        "temperature": {
          "type": "number",
          "minimum": 0,
          "maximum": 2,
          "description": "AI creativity level"
        },
        "prompt_template": {
          "type": "string",
          "description": "Custom prompt template"
        }
      }
    }
  },
  "additionalProperties": false
}